<template>
  <div>
    <!--START NAV -->
    <navigation />

    <!--END NAV -->

    <!-- SLIDE SECTION -->
    <slider />

    <!--END SLIDE SECTION -->

    <!-- LATEST SECTION -->
    <div id="latest-section" class="section">
      <div id="section-wrapper" class="section-wrapper">
        <div class="section-header">Trending movies</div>

        <div class="movies-slide row">
          <a
            href="component.html"
            class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll"
          >
            <div>
              <img src="~/assets/img/Images/raya1.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">raya and the last dragon</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="movie-item-overlay" />
            <div class="movie-item-act">
              <!-- <div class="ring"></div> -->
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/p-4.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">venon: let there be carnage</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
              <div class="movie-item-overlay" />
              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/p-5.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">dealpool 2</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-2.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">The tomorrow war</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-3.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">jungle cruise</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-4.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">dune</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-5.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">The suicide squad</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-6.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">no time to die</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-10.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">prisoner of the ghostland</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>

              <div class="movie-item-overlay" />

              <div class="movie-item-act">
                <!-- <div class="ring"></div> -->
                <i class="bx bxs-right-arrow" />

                <div>
                  <i class="bx bxs-share-alt" />
                  <i class="bx bxs-heart" />
                  <i class="bx bx-plus-medical" />
                </div>
              </div>
            </div>
          </a>

          <div class="btn-load btn-load-tb">
            <span>load more</span>
          </div>
        </div>
      </div>
    </div>

    <!-- END LATEST SECTION -->

    <!-- TV SERIES -->
    <div id="section-tv" class="section-tv">
      <div class="section-wrapper">
        <div class="section-header">
          <span> tv Series</span>
          <!-- <div class="btn-load-2">
                              <span>load more</span>
                         </div> -->
        </div>

        <div id="tv-slider" class="movies-slide row">
          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-9.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">wanda Vision</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="movie-item-overlay" />
            <div class="movie-item-act">
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-8.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">rumble</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="movie-item-overlay" />
            <div class="movie-item-act">
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-1.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">venon</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="movie-item-overlay" />
            <div class="movie-item-act">
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-11.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">luca</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="movie-item-overlay" />
            <div class="movie-item-act">
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/post-12.jpg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">annette</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="movie-item-overlay" />
            <div class="movie-item-act">
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <a href="#" class="movie-item col-3-5 m-5 s-11 to-top show-on-scroll">
            <div>
              <img src="~/assets/img/Images/start-trek.jpeg" alt="" />
              <div class="movie-item-content">
                <div class="movie-item-title">star trek Discovery</div>

                <div class="movies-infors-card">
                  <div class="movies-infor">
                    <ion-icon name="bookmark-outline" />
                    <span>9.0</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="time-outline" />
                    <span>120 mins</span>
                  </div>
                  <div class="movies-infor">
                    <ion-icon name="cube-outline" />
                    <span>FHD</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="movie-item-overlay" />

            <div class="movie-item-act">
              <i class="bx bxs-right-arrow" />

              <div>
                <i class="bx bxs-share-alt" />
                <i class="bx bxs-heart" />
                <i class="bx bx-plus-medical" />
              </div>
            </div>
          </a>

          <div class="btn-load">
            <span>load more</span>
          </div>
        </div>
      </div>
    </div>

    <!-- TV SERIES -->

    <!-- SPECIAL MOVIES -->
    <div class="special">
      <div class="section-wrapper">
        <div class="section-header">hot movie</div>
        <div class="big-slide-item special-movie active to-top show-on-scroll">
          <img src="~/assets/img/Images/black-banner.png" alt="Poster" />

          <div class="big-slide-item-content">
            <div class="item-content-wrapper">
              <div class="item-content-title">black Panther</div>

              <div class="movies-infors">
                <div class="movies-infor">
                  <ion-icon name="bookmark-outline" />
                  <span>9.5</span>
                </div>
                <div class="movies-infor">
                  <ion-icon name="time-outline" />
                  <span>120 mins</span>
                </div>
                <div class="movies-infor">
                  <ion-icon name="cube-outline" />
                  <span>FHD</span>
                </div>
              </div>

              <div class="item-content-description">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas,
                possimus eius. Deserunt non odit, cum vero reprehenderit
                laudantium odio vitae autem quam, incidunt molestias ratione
                mollitia accusantium, facere ab suscipit.
              </div>
            </div>
          </div>

          <div class="play-movies">
            <div class="ring" />
            <a href="https://www.youtube.com/watch?v=qZuQc-GvRlk">
              <i class="bx bxs-right-arrow" />
            </a>
            <div class="btn-watch">
              <span>watch trailer</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--END SPECIAL MOVIES -->

  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, useTemplateRef } from 'vue'

onMounted(() => {
  const header = document.querySelector('.nav') as HTMLElement | null
  const scrollProgress = document.getElementById(
    'progress-bar',
  ) as HTMLElement | null
  const progressVal = document.getElementById(
    'progress-val',
  ) as HTMLElement | null
  const elToShow = document.querySelectorAll<HTMLElement>('.show-on-scroll')
  const listItems = document.querySelectorAll<HTMLElement>('.item')

  window.addEventListener('scroll', () => {
    if (header) {
      if (
        document.body.scrollTop > 80 ||
        document.documentElement.scrollTop > 80
      ) {
        header.classList.add('shrink')
      } else {
        header.classList.remove('shrink')
      }
    }
  })

  const isElInViewport = (el: HTMLElement) => {
    const rect = el.getBoundingClientRect()
    const distance = 200
    return rect.top <= window.innerHeight - distance
  }

  const loop = () => {
    elToShow.forEach((el) => {
      if (isElInViewport(el)) {
        el.classList.add('show')
      }
    })
    requestAnimationFrame(loop)
  }

  loop()

  const scrollPercentage = () => {
    if (scrollProgress && progressVal) {
      const pos = document.documentElement.scrollTop
      const calcHeight =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight
      const scrollVal = Math.round((pos * 100) / calcHeight)
      scrollProgress.style.background = `conic-gradient(#e70634 ${scrollVal}%, #2b2f38 ${scrollVal}%)`
    }
  }

  window.onscroll = scrollPercentage
  window.onload = scrollPercentage

  listItems.forEach((item) => {
    item.addEventListener('click', function () {
      listItems.forEach((el) => el.classList.remove('active'))
      this.classList.add('active')
    })
  })
})
</script>

<style scoped></style>
